<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Instaphp by sesser</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Instaphp</h1>
          <h2>A PHP framework for accessing Instagram's API</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/sesser/Instaphp/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/sesser/Instaphp/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/sesser/Instaphp" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h2>Instaphp v1.0</h2>

<p>This software is licensed under The MIT License. Please see the file named 'LICENSE' for futher details.</p>

<h3>About</h3>

<p>Instaphp is a small(ish) PHP library to access <a href="http://instagr.am/">Instagram's</a> <a href="http://instagram.com/developer/">API</a>. It's
main goal was to be easy to use, lightweight and have as few dependencies as
possible. It's currently only compatible with PHP 5 &gt;= 5.3 but there are
very few 5.3 features being used and it's relatively trivial to convert it
to versions &lt; 5.3.</p>

<p>Instaphp is currently being used to power <a href="http://instaview.me">instaview.me</a>.</p>

<h3>Quickstart Guide</h3>

<p>To get an idea of how the library works, it's best to understand the various
<a href="http://instagram.com/developer/endpoints/">endpoints</a> provided by the API itself. The Instagram API currently has eight
"endpoints" in which to retrieve data from their system:</p>

<ul>
<li>   Users</li>
<li>   Relationships</li>
<li>   Media</li>
<li>   Comments</li>
<li>   Likes</li>
<li>   Tags</li>
<li>   Locations</li>
<li>   Geographies (This is really a subscription based endpoint and not available in Instaphp, yet)</li>
</ul><p>In actuality, these eight endpoints can be summarized into four major endpoints:</p>

<ul>
<li>   Users</li>
<li>   Media</li>
<li>   Tags</li>
<li>   Locations</li>
</ul><p>Relationships are really an attribute of Users. Comments and Likes are both
attributes of Media. Geographies are also an attribute of Media however, that
particular endpoint is only available for subscriptions created for a particular
location. Currently, Instaphp does not have a mechanism that supports subscriptions.</p>

<p>These four main "endpoints" are the basis for this library and allows a good
separation for the various data you can pull from Instagram.</p>

<h4>Example: Getting the current Popular photos</h4>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">//-- Include our library</span>
<span class="k">include_once</span> <span class="s1">'instaphp/instaphp.php'</span><span class="p">;</span>

<span class="c1">//-- Get an instance of the Instaphp object</span>
<span class="nv">$api</span> <span class="o">=</span> <span class="nx">Instaphp\Instaphp</span><span class="o">::</span><span class="na">Instance</span><span class="p">();</span>

<span class="c1">//-- Get the response for Popular media</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nv">$api</span><span class="o">-&gt;</span><span class="na">Media</span><span class="o">-&gt;</span><span class="na">Popular</span><span class="p">();</span>

<span class="c1">//-- Check if an error was returned from the API</span>
<span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">error</span><span class="p">))</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">data</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s1">'&lt;img src="%s" width="%d" height="%d" alt="%s"&gt;'</span><span class="p">,</span> <span class="nv">$item</span><span class="o">-&gt;</span><span class="na">images</span><span class="o">-&gt;</span><span class="na">thumbnail</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">,</span> <span class="nv">$item</span><span class="o">-&gt;</span><span class="na">images</span><span class="o">-&gt;</span><span class="na">thumbnail</span><span class="o">-&gt;</span><span class="na">width</span><span class="p">,</span> <span class="nv">$item</span><span class="o">-&gt;</span><span class="na">images</span><span class="o">-&gt;</span><span class="na">thumbnail</span><span class="o">-&gt;</span><span class="na">height</span><span class="p">,</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$item</span><span class="o">-&gt;</span><span class="na">caption</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">)</span> <span class="o">?</span> <span class="s1">'Untitled'</span><span class="o">:</span><span class="nv">$item</span><span class="o">-&gt;</span><span class="na">caption</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">);</span>
</pre></div>

<h4>Example: Authentication</h4>

<p>Instagram uses oAuth to authenticate its users. That means you follow a link to
their site, login to their system, and grant an application access on your behalf.
It's a fairly common scheme for handling authentication without passing sensitive
data (e.g. your username and password) across (possibly) unsecure lines (e.g. non-https).</p>

<p>For Instaphp, you must have an API Key, API Secret and callback URL in order for
oAuth to work. The basic flow looks like this:</p>

<ol>
<li>   User clicks a link to "Login"</li>
<li>   User lands on Instagram's site and enters username/password</li>
<li>   Upon successful login, user is asked if they want to grant application access to their photos</li>
<li>   If user allows access, Instagram redirects user to callback URL of application with a code</li>
<li>   Application calls API with code to validate authentication</li>
<li>   Application is then given an access token to "sign" the calls to the API</li>
</ol><p>Here's how it looks:</p>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span> 
    <span class="c1">//-- The oAuth URL can be found in the Config object</span>
    <span class="nv">$oAuthUrl</span> <span class="o">=</span> <span class="nx">Instaphp\Config</span><span class="o">::</span><span class="na">Instance</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">GetOAuthUri</span><span class="p">();</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="x">    &lt;!-- Here's a link --&gt;</span>
<span class="x">    &lt;a href="</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$oAuthUrl</span> <span class="cp">?&gt;</span><span class="x">"&gt;Login&lt;/a&gt;</span>

<span class="x">    </span><span class="cp">&lt;?php</span>
    <span class="c1">//-- To authenticate, simply grab the code in your callback url</span>
    <span class="nv">$code</span> <span class="o">=</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'code'</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$code</span><span class="p">))</span> <span class="p">{</span>
        <span class="c1">//-- Create an Instaphp instance</span>
        <span class="nv">$api</span> <span class="o">=</span> <span class="nx">Instaphp\Instaphp</span><span class="o">::</span><span class="na">Instance</span><span class="p">();</span>

        <span class="c1">//-- Authenticate</span>
        <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$api</span><span class="o">-&gt;</span><span class="na">Users</span><span class="o">-&gt;</span><span class="na">Authenticate</span><span class="p">(</span><span class="nv">$code</span><span class="p">);</span>

        <span class="c1">//-- If no errors, grab the access_token (and cookie it, if desired)</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">error</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$token</span> <span class="o">=</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">auth</span><span class="o">-&gt;</span><span class="na">access_token</span><span class="p">;</span>
            <span class="nx">setcookie</span><span class="p">(</span><span class="s1">'instaphp'</span><span class="p">,</span> <span class="nv">$token</span><span class="p">,</span> <span class="nb">strtotime</span><span class="p">(</span><span class="s1">'30 days'</span><span class="p">));</span>
            <span class="c1">//-- once you have a token, update the Instaphp instance so it passes the token for future calls</span>
            <span class="nv">$api</span> <span class="o">=</span> <span class="nx">Instaphp\Instaphp</span><span class="o">::</span><span class="na">Instance</span><span class="p">(</span><span class="nv">$token</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
        </section>

        <footer>
          Instaphp is maintained by <a href="https://github.com/sesser">sesser</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-21707494-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

      </div>
    </div>
  </body>
</html>