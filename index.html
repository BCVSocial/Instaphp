<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Instaphp by sesser</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Instaphp</h1>
        <p>A PHP framework for accessing Instagram&#39;s API</p>
        <p class="view"><a href="https://github.com/sesser/Instaphp">View the Project on GitHub <small>sesser/Instaphp</small></a></p>
        <ul>
          <li><a href="https://github.com/sesser/Instaphp/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/sesser/Instaphp/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/sesser/Instaphp">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h2>
<a name="instaphp-v2" class="anchor" href="#instaphp-v2"><span class="octicon octicon-link"></span></a>Instaphp V2</h2>

<p>This is version 2 of Instaphp. It's a complete rewrite from version 1 and is not backwards compatible. If you're using v1 and want to update to v2, you'll have to make a few changes. Some of the method names have changed and configuration is no longer an XML file. There are unit tests, but given the less than stellar reliability of Instagram's API, they are fairly useless.</p>

<p>If you're using composer, you shouldn't need to worry about dependancies. If you're not, you will have to figure out the include chain. The new version relies on <a href="http://docs.guzzlephp.org/en/latest/">GuzzleHttp</a>.</p>

<p>It's not battle tested so I can't speak to it's reliability/speed/ease of use, but the unit test (generally) all pass. I will keep this in the development branch for a while until I think it's ready to move into master.</p>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>Here's a basic example showing how to get 10 popular posts...</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

    <span class="nv">$api</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Instaphp\Instaphp</span><span class="p">([</span>
        <span class="s1">'client_id'</span> <span class="o">=&gt;</span> <span class="s1">'your client id'</span><span class="p">,</span>
        <span class="s1">'client_secret'</span> <span class="o">=&gt;</span> <span class="s1">'your client secret'</span><span class="p">,</span>
        <span class="s1">'redirect_uri'</span> <span class="o">=&gt;</span> <span class="s1">'http://somehost.foo/callback.php'</span><span class="p">,</span>
        <span class="s1">'scope'</span> <span class="o">=&gt;</span> <span class="s1">'comments+likes'</span>
    <span class="p">]);</span>

    <span class="nv">$popular</span> <span class="o">=</span> <span class="nv">$api</span><span class="o">-&gt;</span><span class="na">Media</span><span class="o">-&gt;</span><span class="na">Popular</span><span class="p">([</span><span class="s1">'count'</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">]);</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$popular</span><span class="o">-&gt;</span><span class="na">error</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$popular</span><span class="o">-&gt;</span><span class="na">data</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span> <span class="p">{</span>
            <span class="nb">printf</span><span class="p">(</span><span class="s1">'&lt;img src="%s"&gt;'</span><span class="p">,</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'images'</span><span class="p">][</span><span class="s1">'low_resolution'</span><span class="p">][</span><span class="s1">'url'</span><span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>

<h3>
<a name="configuration" class="anchor" href="#configuration"><span class="octicon octicon-link"></span></a>Configuration</h3>

<p>Configuration is now a simple <code>array</code> of key/value pairs. The absolute minimum required setting is <code>client_id</code>, but if you plan to allow users to login via OAuth, you'll need <code>client_secret</code> &amp; <code>redirect_uri</code>. All the other settings are optional and/or have sensible defaults.</p>

<table>
<thead><tr>
<th align="left">Key</th>
<th align="center">Default Value</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr>
<td align="left">access_token</td>
<td align="center">Empty</td>
<td align="left">This is the access token for an authorized user. You obtain this from API via OAuth</td>
</tr>
<tr>
<td align="left">redirect_uri</td>
<td align="center">Empty</td>
<td align="left">The redirect URI you defined when setting up your Instagram client</td>
</tr>
<tr>
<td align="left">client_ip</td>
<td align="center">Empty</td>
<td align="left">The IP address of the client. This is used to sign POST &amp; DELETE requests. It's not required, but without the signing, users are more limited in how many likes/comments they can post in a given hour</td>
</tr>
<tr>
<td align="left">scope</td>
<td align="center">comments+relationships+likes</td>
<td align="left">The scope of your client's capability</td>
</tr>
<tr>
<td align="left">log_enabled</td>
<td align="center">TRUE</td>
<td align="left">Enable logging</td>
</tr>
<tr>
<td align="left">log_level</td>
<td align="center">DEBUG</td>
<td align="left">Log level. See <a href="https://github.com/Seldaek/monolog#log-levels">Monolog Logger</a>
</td>
</tr>
<tr>
<td align="left">log_path</td>
<td align="center">./instaphp.log</td>
<td align="left">Where the log file lives</td>
</tr>
<tr>
<td align="left">http_useragent</td>
<td align="center">Instaphp/2.0; cURL/{curl_version}; (+<a href="http://instaphp.com">http://instaphp.com</a>)</td>
<td align="left">The user-agent string sent with all requests</td>
</tr>
<tr>
<td align="left">http_timeout</td>
<td align="center">6</td>
<td align="left">Timeout for requests to the API.</td>
</tr>
<tr>
<td align="left">http_connect_timeout</td>
<td align="center">2</td>
<td align="left">Timeout for http connect</td>
</tr>
<tr>
<td align="left">debug</td>
<td align="center">FALSE</td>
<td align="left">Debug mode?</td>
</tr>
<tr>
<td align="left">event.before</td>
<td align="center">Empty</td>
<td align="left">Callback called prior to sending the request to the API. Method takes a single parameter <a href="http://docs.guzzlephp.org/en/latest/events.html#before">BeforeEvent</a>
</td>
</tr>
<tr>
<td align="left">event.after</td>
<td align="center">Empty</td>
<td align="left">Callback called after a response is received from the API. Method takes a single parameter of <a href="http://docs.guzzlephp.org/en/latest/events.html#complete">CompleteEvent</a>
</td>
</tr>
<tr>
<td align="left">event.error</td>
<td align="center">Empty</td>
<td align="left">Callback called when an error response is received from the API. Method takes a single parameter of <a href="http://docs.guzzlephp.org/en/latest/events.html#error">ErrorEvent</a>.</td>
</tr>
</tbody>
</table>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/sesser">sesser</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-21707494-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>